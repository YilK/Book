## 第10章 文件和异常

### 一、从文件读入数据

​	**1.读取整个文件：**

​		使用 read() 方法读取整个文件

```python
with open('xxx.txt') as f:
    contents=f.read() 
    print(contents)
```

​	**2.逐行读取**

​		通过文件对象执行循环来遍历文件中的每一行

```python
with open('xxx.txt') as f:
    for line in f:
        print(line.strip()) #去除文件末尾的空行
```

​	**3.创建一个包含文件各行内容的列表**

​		使用 readlines() 

```python
with open('xxx.txt') as f:
   	lines = f.readlines()
for line in lines:
    print(line.strip())
```

**为什么输出时会输出空白行，因为在这个文件中，每行的末尾都有一个看不见的换行符，而 print 语句也会加上一个换行符，因此每行末尾都有两个换行符：一个来自文件，另一个来自 print 语句**



### 二、写入文件



| 编号 | 模式  | 描述                                                         |
| ---- | ----- | ------------------------------------------------------------ |
| 1    | `r`   | 打开的文件为只读模式。文件指针位于文件的开头，这是默认模式。 |
| 2    | `rb`  | 打开仅用二进制格式读取的文件。文件指针位于文件的开头，这是默认模式。 |
| 3    | `r+`  | 打开读写文件。文件指针放在文件的开头。                       |
| 4    | `rb+` | 以二进制格式打开一个用于读写文件。文件指针放在文件的开头。   |
| 5    | `w`   | 打开仅供写入的文件。 如果文件存在，则覆盖该文件。 如果文件不存在，则创建一个新文件进行写入。 |
| 6    | `wb`  | 打开仅用二进制格式写入的文件。如果文件存在，则覆盖该文件。 如果文件不存在，则创建一个新文件进行写入。 |
| 7    | `w+`  | 打开写入和取读的文件。如果文件存在，则覆盖现有文件。 如果文件不存在，创建一个新文件进行阅读和写入。 |
| 8    | `wb+` | 打开一个二进制格式的写入和读取文件。 如果文件存在，则覆盖现有文件。 如果文件不存在，创建一个新文件进行阅读和写入。 |
| 9    | `a`   | 打开一个文件进行追加。 如果文件存在，则文件指针位于文件末尾。也就是说，文件处于追加模式。如果文件不存在，它将创建一个新文件进行写入。 |
| 10   | `ab`  | 打开一个二进制格式的文件。如果文件存在，则文件指针位于文件末尾。 也就是说，文件处于追加模式。如果文件不存在，它将创建一个新文件进行写入。 |
| 11   | `a+`  | 打开一个文件，用于追加和阅读。 如果文件存在，则文件指针位于文件末尾。 文件以附加模式打开。 如果文件不存在，它将创建一个新文件进行阅读和写入。 |
| 12   | `ab+` | 打开一个二进制格式的附加和读取文件。 如果文件存在，则文件指针位于文件末尾。文件以附加模式打开。如果文件不存在，它将创建一个新文件进行读取和写入。 |



### 三、异常

1. **使用 else 代码块**

   依赖于 try 代码块成功执行的代码都应该放到 else 代码块中

2. **pass**

   在代码块中使用它来让Python什么都不要做



### 四、存储数据

**使用 json.dump() 和 json.load()**

json.dump() 接受两个实参：要存储的数据和要存储数据的文件对象

```python
import json  

numbers = [2, 3, 5, 7, 11, 13] 
filename = 'numbers.json' 
with open(filename, 'w') as f_obj:
    json.dump(numbers, f_obj)
```

json.load()  读取文件

```python
import json 

filename = 'numbers.json' 
with open(filename) as f_obj:    
    numbers = json.load(f_obj)  
    print(numbers)
```



